# Ansible Technical Challenge


## Pre-requisites

### vault password
Please touch a vault password file ( VAULT_PASSWORD in email )
```
✗ echo VAULT_PASSWORD > vault_password_file 
```

## Assumptions

### Domain
In this demo, webservers will be deployed to domain - yaml.work, including URLs
 - https://mini_car_game.yaml.work, and
 - https://snakegame.yaml.work

### self signed certificate
Self signed certificate was generated by
```
✗ openssl req -x509 -nodes -days 90 -newkey rsa:2048 -keyout httpd.key -out httpd.crt -subj "/CN=*.yaml.work"
```

### ansible ssh key
The private key will be saved in file "./ansible_ssh_private_key_file".
After the first run, you will find
```
➜  adventone-ansible-challenge git:(master) ✗ ll ansible_ssh_private_key_file
-r-------- 1 xhou xhou 1.7K May  8 14:11 ansible_ssh_private_key_file
```

### aws account
 - my personal account with keys in vault

### vault file
```
➜  adventone-ansible-challenge git:(master) ✗ ansible-vault view vault.yml 
---
vault_aws_access_key:     xxx
vault_aws_secret_key:     xxx

cloudflare_account_email: xxx
cloudflare_api_token:     xxx
```

## Implemented
 - 2 VMs - AWS EC2 RedHat 8.6
 - 2 single HTML websevers
 - cloud=aws
 - domain = yaml.work
 - URL on cloudflare
 - vpc + keypair + security group
 - SSL with Self-signed certs
 - not dynamic inventory but in-memory inventory
 - ansible-vault
 - ansible-lint

## Not implemented
 - system hardening

## Example
Please refer to logs/ansible-playbook.log for a successful deployment example.
